## TL;DR

성능 최적화는 렌더링 최적화와 로딩 최적화 두 가지로 나눌 수 있다.  
웹 페이지 렌더링 최적화의 목표는 리플로우(레이아웃, 계산)를 최대한 적게 발생시키면서 빠르게 화면을 그리는 것.

### CSS

- reflow 와 repaint를 고려한 스타일을 작성.
- 사용하지 않는 css제거
- 간결한 스타일 작성.

### HTML

- 인라인 스타일 사용 지양 (웹 페이지가 그려지면서 레이아웃에 영향을 미치기 때문에 추가적인 리플로우를 발생시킨다.)

- 복잡한 DOM Tree 지양.

  - DOM이 작고 깊이가 얕을수록 계산이 빠르다.
  - 불필요하게 감싸는 요소 제거 (div)

- 애니메이션 최적화

  - css 를 통해 구현하는 것이 성능면에서 이득. 자바스크립트 또는 라이브러리 사용보다.
  - transform 은 리플로우와 리페인트 모두 발생시키지 않고 합성만 발생시키는 속성으로 애니메이션에서 사용 시 렌더링 속도 향상.
  - position 설정을 해준다. absolute 또는 fixed 로 설정하면 주변 요소에 영향을 주지 않음.

- JS 최적화

  - 강제 동기 레이아웃 피하기 / 레이아웃 스래싱(thrashing) 피하기
    레이아웃 단계가 완료되기 전에 요소의 위치나 크기를 변경 후 바로 가져오려고 하면 강제로 레이아웃이 발생하는데 이것을 강제 동기 레이아웃 이라고 함.
  - 이것을 반복적으로 발생시키는 것이 레이아웃 스레싱.

- 로딩 최적화 - 렌더 블로킹 최적화

  - css는 head 에서 import
  - body 태그의 맨 하단에 script import
  - media 속성 사용해 조건별로 css import
  - async / defer 사용하기
  - img 지연 로딩 사용.

    - 사용 가능한 값으로 `auto`, `lazy`, `eager`가 있다.

      - `auto`: 디폴트 값. `loading` 속성을 쓰지 않은 것과 같다.
      - `lazy`: 화상에 보이는 부분만 먼저 출력하고 화면 바깥쪽 이미지들은 로딩하지 않는다. 사용자가 화면을 위로 올리면 아래쪽에 있던 이미지가 올라오면서 로딩된다.
      - `eager`: 화면 위치에 상관없이 페이지가 로딩되자마자 이미지를 로드한다.

      ```
       <img src="item.jpg" loading="lazy" alt>
      ```

  - webpack 사용
    모듈 번들러 웹팩을 사용해 css와 js 파일을 하나의 파일로 묶어서 리소스 요청을 줄일 수 있다.
