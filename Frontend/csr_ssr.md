# 렌더링 방식과 웹 아키텍처

## CSR vs SSR

렌더링의 주체가 누군지에 따라, CSR과 SSR로 나뉜다.  
CSR과 SSR이라는 개념 자체는 오래되었으나, 본격적으로 대두되기 시작한 것은 React,Vue,Angular 등  
자바스크립트를 기반으로 한 라이브러리 또는 프레임워크가 대세가 되면서부터이다.  
뼈대만 받고 브라우저(Client)에서 동적으로 DOM을 그리게 되면 CSR이고 위와 같이 이미 다 그려진 DOM을 받게 되면 SSR.  
<br>

### CSR (Client Side Rendering)

각 프레임워크 또는 라이브러리의 문법에 맞게 코딩하고 빌드를 하게 되면, 최종적으로는 브라우저가 이해 할 수 있는 HTML, CSS, JS 형태의 파일이 결과가 된다.  
이를 웹서버에 FTP든, 터미널이든 올리기만 하면 됨. 이 때 웹서버는 아주 단순히 올려놓은 파일을 전달해주는 전달자 역할만 하고,  
브라우저는 웹서버로부터 다운받은 파일을 그냥 실행 할 뿐이다. JS파일을 실행하면서 DOM에 내용을 추가하면서 그리게 된다.  
즉, 서버는 단순하게 비어있는 파일들을 클라이언트에 넘겨주고, 클라이언트단에서 렌더링을 실행한다.

### SSR (Server Side Rendering)

SSR은 HTML, CSS, JS를 직접 올리는 것이 아니라 해당 파일들을 만들어 낼 수 있는 로직을 올리고 서버에서 해당 로직을 실행해서 최종적으로 HTML, CSS, JS를 만들어 브라우저에 전달한다.  
만들어진 HTML 파일에는 이미 DOM이 다 구성이 되어 있음. 로직을 올린다는 것은 결국 실행 가능한 Function을 올린다는 것이고 이는 백엔드 프레임워크에 해당 된다.  
백엔드가 Spring 기반이면 Java 소스를 올리는 것이고, django는 Python, Node.js는 JavaScript 소스를 올려서 실행하게 됨.  
SSR은 브라우저에서 보는 파일을 올리는 것이 아니고 브라우저에서 보는 파일을 만들어 낼 수 있는 로직을 포함한 파일을 서버에 올려서 해당 파일을 만들어 내는구나 정도로만 이해하면 된다.  
이미 DOM 이 다 구성된 파일을 브라우저가 받기 때문에 바로 그릴수가 있어서 초기 구동 속도가 빠르고,  
DOM에 이미 내용이 다 차있기 때문에 검색 엔진들이 정보를 수집할때 정확한 정보를 가져갈 수 있어서 SEO에 좋다.  
<br>

### 고려해야할 점.

**_CSR은 SEO에 취약하다?_**  
CSR이 SEO에 취약한것은 사실이나 그 전에 앞서 내 서비스 전체가 SEO가 필요한가를 고민해봐야 한다.  
모든 서비스가 다 SEO가 필요한 것이 아니고, 어떤 서비스는 고객의 데이터를 보호하기 위해 SEO가 일어나지 않게끔 해야 함.  
공개되야 하는 퍼블릭 데이터만 SEO가 필요할 뿐이지 모든 데이터가 SEO가 필요한 것은 아님.
👉 만약, 적용해야하는 서비스가 검색엔진에 노출되는 것이 중요하다면 부분적으로 SSR을 적용해 보완할 수 있어야 한다.

**_잘 언급되지 않는 비용 문제_**  
CSR로 구성 할 경우 S3 같은 단순 스토리지에 올리고 전면에 Cloud Front로 구성하여 캐싱과 레이턴시를 줄이고 트레픽 비용만 지불하게 된다.  
SSR의 경우 **매번 서버에서 로직을 실행하는 비용을 추가**하게 된다. 동적 컨텐츠가 많은 경우 캐싱도 무효화 된다.  
인스턴스를 Auto Scale 하거나 Serverless 기반에 Function을 사용하더라도 CSR과 비교해서 비용이 수백 ~ 수천배까지 차이가 날 수 있습니다.

**_결론_**  
CSR, SSR을 단순비교하여 뭐가 빠르고 좋다라기 보다는 내 프로젝트나 서비스 구성에 맞는 방법을 사용해야 한다는 것.  
고객의 데이터를 보호해야 하는 경우나 비용이 민감할 경우 CSR를 택할 수 있고, 정적 콘텐츠와 퍼블릭 데이터가 많은 경우에는 SSR을 선택하는 것이 좋고, 두 가지를 섞어서 서비스를 구성해야 할 수도 있습니다.

## MPA vs SPA

기술적으로는 SPA는 어떤 페이지를 접속하더라도 HTML, CSS, JS 동일한 파일 하나만 접속한 페이지에 맞게 화면을 구성하고  
MPA는 페이지 별로 해당 페이지에 맞는 HTML, CSS, JS 파일을 받아서 화면을 구성합니다.

### MPA 란?

Multi Page Application 의 약자로 여러 페이지로 구성된 웹 어플리케이션의 약자이다.  
사용자의 클릭과 같은 인터렉션이 발생할 때마다, 서버로부터 html을 받아와서 해당 링크로 이동하는 전통적인 웹 페이지 구성방식.

### SPA 란?

Single Page Application 의 약자로 html이 하나로 구성된 웹 어플리케이션.  
브라우저에 최초에 한번 html을 로드하고 이후부터는 특정 부분만 데이터를 바인딩하는 방식.  
SPA는 현재 웹 개발의 트렌드이며 React,Vue,Angular 에서 사용한다.
